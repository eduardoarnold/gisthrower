'use strict';

const fs = require('fs');

const fileExists = (path) => {
  return fs.existsSync(path, 'utf8');
};

const createEmptyFile = (path) => {
  const emptyData = {
    username: null,
    token: null
  };
  writeFile(path, emptyData);
};

const checkFileOnFirstRun = (path) => {
  if (!fileExists(path)) {
    createEmptyFile(path);
  }
};

const readFile = (path) => {
  const fileData = fs.readFileSync(path, { encoding: 'utf8' });
  return JSON.parse(fileData);
};

const writeFile = (path, data) => {
  const jsonData = JSON.stringify(data);
  fs.writeFileSync(path, jsonData);
};

module.exports = {
  checkFileOnFirstRun: checkFileOnFirstRun,
  readFile: readFile,
  writeFile: writeFile
};
