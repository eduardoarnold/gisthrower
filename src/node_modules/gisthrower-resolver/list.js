'use strict';

const gistApi = require('gisthrower-api');

const printChunk = (chunk) => {
  const mapper = require('gisthrower-infrastructure').messageMapper;
  const pritableArray = chunk.map(mapper.gistInformations);
  pritableArray.forEach((gist) => { console.log(gist); });
};

const all = () => {
  gistApi.list.all()
    .then((chunk) => {
      printChunk(chunk);
    })
    .catch((error) => {
      console.error(error);
    });
};

const starred = () => {
  gistApi.list.starred()
    .then((chunk) => {
      printChunk(chunk);
    })
    .catch((error) => {
      console.error(error);
    });
};

const fromUser = (userName) => {
  gistApi.list.fromUser(userName)
    .then((chunk) => {
      printChunk(chunk);
    })
    .catch((error) => {
      console.error(error);
    });
};

module.exports = {
  all: all,
  starred: starred,
  fromUser: fromUser
};
