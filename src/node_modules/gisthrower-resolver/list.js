'use strict';

const gistApi = require('gisthrower-api');
const util = require('util');

const printChunk = (chunk) => {
  const mapper = require('gisthrower-infrastructure').messageMapper;
  const pritableArray = chunk.map(mapper.gistInformations);
  pritableArray.forEach((gist) => { console.log(gist); });
};

const list = (options) => {
  if (options.all) {
    listAll();
  } else if (options.starred) {
    listStarred();
  } else {
    listAll();
  }
};

const listAll = () => {
  gistApi.list.all()
    .then((chunk) => {
      printChunk(chunk);
    })
    .catch((error) => {
      console.error(error);
    });
};

const listStarred = () => {
  gistApi.list.starred()
    .then((chunk) => {
      printChunk(chunk);
    })
    .catch((error) => {
      console.error(error);
    });
};

module.exports = list;
