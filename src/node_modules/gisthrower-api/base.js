'use strict';

var rp = require('request-promise');
const credentials = require('gisthrower-auth').credentials.getCredentials();
const headers = {
  'User-Agent': 'GISTHROWER-CLI',
  'Authorization': 'Token ' + credentials.token
}

const get = (path) => {
  const options = {
    uri: 'https://api.github.com' + path,
    method: 'GET',
    headers: headers,
    json: true
  };

  return rp(options)
    .then((chunk) => {
      return chunk;
    })
    .catch((error) => {
      return error;
    });
}

module.exports = {
  get: get
}
