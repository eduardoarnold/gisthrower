'use strict';

var rp = require('request-promise');
const q = require('q');
const credentials = require('gisthrower-auth').credentials.getCredentials();

const listAll = () => {
  const options = {
    uri: 'https://api.github.com/gists',
    method: 'GET',
    headers: {
      'User-Agent': 'GISTHROWER-CLI',
      'Authorization': 'Token ' + credentials.token
    }
  };

  return rp(options)
    .then((chunk) => {
      return chunk;
    })
    .catch((error) => {
      return error;
    });
};

module.exports = listAll;
